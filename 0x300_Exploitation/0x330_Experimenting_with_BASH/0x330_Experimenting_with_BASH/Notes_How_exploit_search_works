We first declare variables command and buffer
We malloc() the command which places it in the heap
Then, we set buffer after the command-name(./notesearch ') and put return address(ret) in the buffer
The return address(ret) will point to a location in the stack which will, in the future(after the program is executed), contain the NOP sled and then the shellcode
We then put a NOP in the first 60 bytes of buffer and then shellcode after the NOP
When the program is executed, the command(including buffer) will be loaded into the heap
When we use the system command to call notesearch, notesearch will strcpy the buffer into the stack
We test various numbers of offset until some satisfy the amount between the address of (any 1 NOP in the NOP sled) and the variable i and store it in ret
When the offset is found, the return address of the notesearch function will be changed to the value in variable ret
Now, the notesearch program gets executed, and finally, when it has to return to exploit_search, it will be directed to the NOP sled and execute the shellcode
The shellcode(magic for now) then gives us root privileges